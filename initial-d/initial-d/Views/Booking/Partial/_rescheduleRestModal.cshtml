@model initial_d.Models.APIModels.BookingRestVM

              
@using (Html.BeginForm("RescheduleRest", "Booking", FormMethod.Post))
{
    @Html.HiddenFor(m => m.restriction_id)
    @Html.HiddenFor(m => m.serv_id)

    @Html.HiddenFor(m => m.updated_at)
    @Html.HiddenFor(m => m.created_at)
    @Html.HiddenFor(m => m.deleted)

    <div class="modal-header">
        <h5 class="modal-title">
            <i class="fa fa-history" aria-hidden="true"></i>
            Reagendar Restricción
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body">

            <p>Selecciona el nuevo lapsus para la reserva</p>
        
            <div class="form-group">
                @Html.LabelFor(m => m.start_date_hour, new { @class="font-weight-bold" })
                
                @Html.Hidden("start_date_hour", Model.start_date_hour?.ToString("yyyy-MM-ddTHH:mm"))

                <div class="input-group date" id="start_date_hour_cont" data-target-input="nearest">
                    <input type="text"  value="@Model.start_date_hour" class = "form-control datetimepicker-input h-100" data-target="#start_date_hour_cont" 
                            id="start_date_hour_view" />
                    <div class="input-group-append" data-target="#start_date_hour_cont" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>

                @Html.ValidationMessageFor(m => m.start_date_hour)
            </div>
                    
            <div class="form-group">
                @Html.LabelFor(m => m.end_date_hour, new { @class="font-weight-bold" })
                
                @Html.Hidden("end_date_hour", Model.end_date_hour?.ToString("yyyy-MM-ddTHH:mm"))

                <div class="input-group date" id="end_date_hour_cont" data-target-input="nearest">
                    <input type="text"  value="@Model.end_date_hour" class = "form-control datetimepicker-input h-100" data-target="#end_date_hour_cont" 
                            id="end_date_hour_view" />
                    <div class="input-group-append" data-target="#end_date_hour_cont" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>

                @Html.ValidationMessageFor(m => m.end_date_hour)
            </div>

    </div>

    <div class="modal-footer">
        <a role="button" href="#" class="btn btn-sm btn-secondary" data-dismiss="modal">
            <i class="fa fa-backspace" aria-hidden="true"></i>
            <span>Volver</span>
        </a>

        <button type="submit" class="btn btn-sm btn-green">
            <i class="fa fa-history" aria-hidden="true"></i>
            Reagendar
        </button>
    </div>

}


<script>

    WaitForJquery(function ()
    {

        // Cuando start_date_hour Cambia, cambia end_date_hour
        $(document).on('input', '#start_date_hour', function ()
        {
            // Get start_date time from the view input
            let newTime = $('#start_date_hour_view').val();
            // Change the actual input *with the right format*
            $('#start_date_hour').val(moment(newTime).format('YYYY-MM-DDTHH:mm'));
        });

        // Cuando end_date_hour Cambia, cambia end_date_hour
        $(document).on('input', '#end_date_hour', function ()
        {
            // Get end_date time from the view input
            let newTime = $('#end_date_hour_view').val();
            // Change the actual input *with the right format*
            $('#end_date_hour').val(moment(newTime).format('YYYY-MM-DDTHH:mm'));
        });

        let startTime = new Date( $('#start_date_hour').val() );
        $("#start_date_hour_cont").datetimepicker("date", startTime);
        
        let endTime = new Date( $('#end_date_hour').val() );
        $("#end_date_hour_cont").datetimepicker("date", endTime);

    });

</script>