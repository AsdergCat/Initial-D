@model initial_d.Models.APIModels.Usuario
@{ 
    // User data needed to perform the Actions or make decisions about the menu
    string mechId = Model.appuser_id;
    string mechStatus = Model.status_id;
    bool isDeleted = Model.deleted;

    // Context to decide what to show
    string ctx = (string)ViewData["context"] ?? string.Empty;
    bool isList = ctx.Equals("list");
    bool isDetails = ctx.Equals("details");
    bool isdeleteList = ctx.Equals("deleteList");

    // Ids to keep an eye on
    string banId = "BAN";

    // Action URLs
    string detailsUrl = Url.Action("MechDetails", "Mecanicos", new { mechId });
    string update_Url = Url.Action("UpdateMech", "Mecanicos", new { mechId });
}

<div class="dropdown">

	<button class="btn btn-yellow btn-sm dropdown-toggle" type="button" id="dropdownMenuButton"
			data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		<i class="fa fa-cog mr-1 " aria-hidden="true"></i>
		Actions
	</button>

	<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
		<div class="d-flex flex-column">
			@if(isList || isdeleteList)
            {
                <!-- DETALLES -->
                <a href="@detailsUrl" class="dropdown-item small">
                    <i class="fa fa-bars mr-1 " aria-hidden="true"></i>
                    Detalles
                </a>
			}

            @if (isDetails && !isDeleted)
            {
                <!-- ACTUALIZAR DATOS -->
				<a href="@update_Url" class="dropdown-item small">
					<i class="fa fa-user-edit" aria-hidden="true"></i>
					Actualizar Datos
				</a>
            }

			@if ((isDetails || isList) && !isDeleted)
            {

				<!-- DART DE ALTA/BAJA -->
                if (mechStatus.Equals(banId))
                {
					<a class="dropdown-item small"
					   data-toggle="modal" href="#user-state-modal" data-mech-id="@mechId" data-new-state="ACT">
						<i class="fa fa-unlock-alt" aria-hidden="true"></i>
						Dar de Alta
					</a>
				}
				else
				{
					<a class="dropdown-item small"
					   data-toggle="modal" href="#user-state-modal" data-mech-id="@mechId" data-new-state="BAN">
						<i class="fa fa-lock" aria-hidden="true"></i>
						Dar de Baja
					</a>
				}

				<!-- ELIMINAR -->
				<a class="dropdown-item small" role="button" data-toggle="modal" data-mech-id="@mechId" href="#delete-modal">
					<i class="fa fa-trash" aria-hidden="true"></i>
					Eliminar
				</a>

			}

			@if(isDeleted)
			{
				<!-- RESTAURAR -->
				<a class="dropdown-item small mr-3" role="button" data-toggle="modal" data-mech-id="@mechId" href="#delete-modal">
					<i class="fa fa-trash-restore" aria-hidden="true"></i>
					Restaurar
				</a>
			}

		</div>

	</div>

</div>
