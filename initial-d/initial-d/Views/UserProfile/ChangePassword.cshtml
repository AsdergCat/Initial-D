@model initial_d.Models.Viewmodels.ChangePasswordVM
@{
    ViewBag.Title = "Cambiar Contraseña";

    string GoBack_Url = Url.Action("Profile", "UserProfile");
}


<div class="header">

    <div class="header-title">
        <h2>
            <i class="fa fa-user-edit" aria-hidden="true"></i>
            @ViewBag.Title
        </h2>
    </div>

</div>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken();
    
    <div class="col-12 col-ms-11 col-md-10 col-lg-8 col-xl-6 px-lg-2">
        <div class="c-jumbotron">
            
            <div class="form-group">
                <div class="row">
                    <label class = "control-label mr-3">@Html.DisplayNameFor(m => m.oldPassword1)</label>
                    @Html.ValidationMessageFor(x => x.oldPassword1)
                </div>
                <div>
                    @Html.PasswordFor(m => m.oldPassword1, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <label class = "control-label mr-3">@Html.DisplayNameFor(m => m.oldPassword2)</label>
                    @Html.ValidationMessageFor(x => x.oldPassword2)
                </div>
                <div>
                    @Html.PasswordFor(m => m.oldPassword2, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <label class = "control-label mr-3">@Html.DisplayNameFor(m => m.newPassword1)</label>
                    @Html.ValidationMessageFor(x => x.newPassword1)
                </div>
                <div>
                    @Html.PasswordFor(m => m.newPassword1, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <label class = "control-label mr-3">@Html.DisplayNameFor(m => m.newPassword2)</label>
                    @Html.ValidationMessageFor(x => x.newPassword2)
                </div>
                <div>
                    @Html.PasswordFor(m => m.newPassword2, new { @class = "form-control" })
                </div>
            </div>

        </div>
    </div>
    
    @* ACTION BUTTONS *@
    <div class="mt-3">
        <a href="@GoBack_Url" class="btn btn-sm btn-secondary mr-3" role="button">
            <i class="fa fa-backspace" aria-hidden="true"></i>
            Cancelar
        </a>
        <button href="#" class="btn btn-sm btn-green mr-3" role="button">
            <i class="fa fa-save" aria-hidden="true"></i>
            Cambiar
        </button>
    </div>

}


@section customScripts{

    <script>
        
        $(function () {

            // Validar que ambas contraseñas sean iguales
            $('#oldPassword2').rules('add', { 
                equalTo: "#oldPassword1", 
                required: true,
                messages: { 
                    equalTo: 'Las contraseñas deben ser iguales',
                    required: 'Este campo es obligatorio'
                } 
            });
            
            // Validar que ambas contraseñas sean iguales
            $('#newPassword2').rules('add', { 
                equalTo: "#newPassword1", 
                required: true,
                messages: { 
                    equalTo: 'Las contraseñas deben ser iguales',
                    required: 'Este campo es obligatorio'
                } 
            });

        });

    </script>

}